[git]
conventional = true
filter_unmerged = true
commit_preprocessors = [
  { pattern = "^Merge.+", replace = "" },
]

[changelog]
body = """
## Release {{ version }}
{% if date %}_{{ date }}_{% endif %}

### Highlights
{% for group, commits in commits | group_by(attribute="type") %}
#### {{ group | default(value="other") | upper }}
{% for commit in commits %}
- {{ commit.message | split(pat="\n") | first }} ({{ commit.id | truncate(length=7) }})
{% if commit.body %}  - {{ commit.body | indent(prefix="  ") }}{% endif %}
{% endfor %}
{% endfor %}

### Contributors
{% for author, commits in commits | group_by(attribute="author") %}
- {{ author }} ({{ commits | length }} commit{{ "s" if commits | length > 1 }})
{% endfor %}
"""

group_by = ["type"]
trim = true
footer = """
---
Changelog generated by git-cliff.
"""
